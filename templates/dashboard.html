<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - CineApp</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header class="main-header">
  <h1>Bienvenido, {{ session['user_id'] }} </h1>
  <div class="header-actions">
    <form method="GET" action="{{ url_for('dashboard') }}" class="search-form">
      <input type="text" name="query" placeholder="Buscar pel√≠cula..." value="{{ search_query }}">
      <select name="genre">
        <option value="">Todos los g√©neros</option>
        {% for genre in genres %}
          <option value="{{ genre.id }}" {% if genre_id == genre.id|string %}selected{% endif %}>
            {{ genre.name }}
          </option>
        {% endfor %}
      </select>
      <button type="submit">üîç Buscar</button>
    </form>
    <a href="{{ url_for('logout') }}" class="logout-btn">Cerrar sesi√≥n</a>
  </div>
</header>

<main class="movie-grid">
  {% for movie in movies %}
  <div class="movie-card">
    <a href="{{ url_for('movie', movie_id=movie.id) }}">
      {% if movie.poster_path %}
        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}">
      {% else %}
        <img src="{{ url_for('static', filename='no-image.png') }}" alt="Sin imagen">
      {% endif %}
      <h3>{{ movie.title }}</h3>
      <p>‚≠ê {{ movie.vote_average }}</p>
    </a>
  </div>
  {% endfor %}
</main>

<div class="pagination">
  {% if prev_page %}
    <a href="{{ url_for('dashboard', page=prev_page, query=search_query, genre=genre_id) }}" class="btn">‚¨ÖÔ∏è Anterior</a>
  {% endif %}
  <span>P√°gina {{ current_page }}</span>
  {% if next_page %}
    <a href="{{ url_for('dashboard', page=next_page, query=search_query, genre=genre_id) }}" class="btn">Siguiente ‚û°Ô∏è</a>
  {% endif %}
</div>

</body>
</html>
